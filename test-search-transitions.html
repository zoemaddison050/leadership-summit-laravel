<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Transitions Test - Visual Feedback Testing</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .test-header {
        background: #2563eb;
        color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
      }
      .test-section {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .test-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }
      button {
        background: #2563eb;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
      }
      button:hover {
        background: #1d4ed8;
      }
      button:disabled {
        background: #9ca3af;
        cursor: not-allowed;
      }
      .search-demo {
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        background: #f9fafb;
      }
      .search-bar {
        max-width: 400px;
        margin: 0 auto 20px;
      }
      .input-group {
        display: flex;
        gap: 5px;
      }
      .form-control {
        flex: 1;
        padding: 10px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 16px;
      }
      .btn {
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
      }
      .btn-primary {
        background: #2563eb;
        color: white;
      }
      .btn-outline-secondary {
        background: white;
        color: #6b7280;
        border: 1px solid #d1d5db;
      }
      .results-container {
        min-height: 200px;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        padding: 20px;
        background: white;
        position: relative;
        overflow: hidden;
      }
      .search-results {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.3s ease, transform 0.3s ease;
        display: none;
      }
      .search-results.visible {
        opacity: 1;
        transform: translateY(0);
        display: block;
      }
      .default-content {
        opacity: 1;
        transform: translateY(0);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }
      .default-content.hidden {
        opacity: 0;
        transform: translateY(-20px);
      }
      .clear-btn-hidden {
        opacity: 0;
        transform: scale(0.8);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .clear-btn-visible {
        opacity: 1;
        transform: scale(1);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .test-result {
        padding: 10px;
        margin: 5px 0;
        border-radius: 4px;
        font-family: monospace;
      }
      .test-pass {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #bbf7d0;
      }
      .test-fail {
        background: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
      }
      .test-info {
        background: #dbeafe;
        color: #1e40af;
        border: 1px solid #bfdbfe;
      }
      .demo-item {
        padding: 15px;
        margin: 10px 0;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        background: white;
      }
      .demo-item h4 {
        margin: 0 0 10px 0;
        color: #2563eb;
      }
      .demo-item p {
        margin: 0;
        color: #6b7280;
      }
      .no-results {
        text-align: center;
        padding: 40px 20px;
        color: #6b7280;
        background: #f9fafb;
        border-radius: 6px;
        border: 2px dashed #e5e7eb;
      }
      .no-results i {
        font-size: 3rem;
        margin-bottom: 15px;
        opacity: 0.5;
        color: #2563eb;
      }
      .no-results h3 {
        color: #2563eb;
        margin-bottom: 10px;
      }
      .timing-display {
        background: #f3f4f6;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        font-family: monospace;
        font-size: 12px;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="test-header">
      <h1>🎭 Search Transitions & Visual Feedback Test</h1>
      <p>
        Testing Requirements 4.1-4.4: Visual feedback and smooth transitions
      </p>
    </div>

    <div class="test-section">
      <h2>Test Controls</h2>
      <div class="test-controls">
        <button onclick="runAllTransitionTests()" id="runAllBtn">
          Run All Tests
        </button>
        <button onclick="testDebounceDelay()" id="debounceBtn">
          Test Debounce (4.1)
        </button>
        <button onclick="testClearButtonVisibility()" id="clearVisBtn">
          Test Clear Button (4.2)
        </button>
        <button onclick="testSmoothTransitions()" id="transitionsBtn">
          Test Transitions (4.3)
        </button>
        <button onclick="testVisualFeedback()" id="feedbackBtn">
          Test Visual Feedback (4.4)
        </button>
        <button onclick="clearTestResults()" id="clearBtn">
          Clear Results
        </button>
      </div>
      <div class="timing-display" id="timingDisplay">Ready to run tests...</div>
    </div>

    <div class="test-section">
      <h2>Interactive Search Demo</h2>
      <div class="search-demo">
        <div class="search-bar">
          <div class="input-group">
            <input
              type="text"
              id="demoSearchInput"
              class="form-control"
              placeholder="Type to test search transitions..."
            />
            <button
              class="btn btn-primary"
              type="button"
              onclick="performDemoSearch()"
            >
              <i class="fas fa-search"></i>
            </button>
            <button
              class="btn btn-outline-secondary clear-btn-hidden"
              type="button"
              onclick="clearDemoSearch()"
              id="demoClearBtn"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>

        <div class="results-container">
          <!-- Search Results -->
          <div id="demoSearchResults" class="search-results">
            <div class="demo-item">
              <h4>Leadership Workshop</h4>
              <p>Interactive session on modern leadership techniques</p>
            </div>
            <div class="demo-item">
              <h4>Innovation Summit</h4>
              <p>Exploring cutting-edge business innovations</p>
            </div>
          </div>

          <!-- Default Content -->
          <div id="demoDefaultContent" class="default-content">
            <div class="demo-item">
              <h4>Opening Keynote</h4>
              <p>Welcome address and summit overview</p>
            </div>
            <div class="demo-item">
              <h4>Networking Session</h4>
              <p>Connect with fellow professionals</p>
            </div>
            <div class="demo-item">
              <h4>Panel Discussion</h4>
              <p>Industry experts share insights</p>
            </div>
          </div>

          <!-- No Results -->
          <div id="demoNoResults" class="no-results" style="display: none">
            <i class="fas fa-search"></i>
            <h3>No results found</h3>
            <p>Try searching for "leadership", "innovation", or "workshop"</p>
          </div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2>Test Results</h2>
      <div id="testResults">
        <div class="test-info">
          Click "Run All Tests" to start testing visual feedback and
          transitions...
        </div>
      </div>
    </div>

    <script>
      // Test state
      let testResults = [];
      let debounceTimer = null;
      let transitionTimer = null;

      // Test configuration
      const TEST_CONFIG = {
        debounceDelay: 300,
        transitionDuration: 300,
        testTimeout: 5000,
      };

      // Demo search data
      const demoData = [
        {
          title: "Leadership Workshop",
          description: "Interactive session on modern leadership techniques",
        },
        {
          title: "Innovation Summit",
          description: "Exploring cutting-edge business innovations",
        },
        {
          title: "Digital Transformation",
          description: "Adapting to the digital age",
        },
        { title: "Team Building", description: "Strengthening team dynamics" },
      ];

      // Utility functions
      function logResult(message, type = "info") {
        const result = { message, type, timestamp: Date.now() };
        testResults.push(result);

        const container = document.getElementById("testResults");
        const resultDiv = document.createElement("div");
        resultDiv.className = `test-result test-${type}`;
        resultDiv.textContent = message;
        container.appendChild(resultDiv);

        console.log(`[${type.toUpperCase()}] ${message}`);
      }

      function updateTiming(message) {
        document.getElementById("timingDisplay").textContent = message;
      }

      function clearTestResults() {
        testResults = [];
        document.getElementById("testResults").innerHTML =
          '<div class="test-info">Ready for testing...</div>';
        updateTiming("Ready to run tests...");
      }

      // Demo search functionality
      function setupDemoSearch() {
        const input = document.getElementById("demoSearchInput");
        const clearBtn = document.getElementById("demoClearBtn");

        // Real-time search with debounce
        input.addEventListener("input", function () {
          const searchTerm = this.value.trim();

          // Clear existing timer
          if (debounceTimer) {
            clearTimeout(debounceTimer);
          }

          // Show/hide clear button
          if (searchTerm.length > 0) {
            clearBtn.classList.remove("clear-btn-hidden");
            clearBtn.classList.add("clear-btn-visible");
          } else {
            clearBtn.classList.remove("clear-btn-visible");
            clearBtn.classList.add("clear-btn-hidden");
          }

          // Debounced search
          debounceTimer = setTimeout(() => {
            performDemoSearch();
          }, TEST_CONFIG.debounceDelay);
        });

        // Enter key support
        input.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            if (debounceTimer) {
              clearTimeout(debounceTimer);
            }
            performDemoSearch();
          }
        });
      }

      function performDemoSearch() {
        const input = document.getElementById("demoSearchInput");
        const searchTerm = input.value.trim().toLowerCase();
        const searchResults = document.getElementById("demoSearchResults");
        const defaultContent = document.getElementById("demoDefaultContent");
        const noResults = document.getElementById("demoNoResults");

        if (searchTerm === "") {
          // Show default content
          showDefaultContent();
          return;
        }

        // Filter demo data
        const filteredData = demoData.filter(
          (item) =>
            item.title.toLowerCase().includes(searchTerm) ||
            item.description.toLowerCase().includes(searchTerm)
        );

        if (filteredData.length > 0) {
          // Show search results
          showSearchResults(filteredData);
        } else {
          // Show no results
          showNoResults();
        }
      }

      function showSearchResults(data) {
        const searchResults = document.getElementById("demoSearchResults");
        const defaultContent = document.getElementById("demoDefaultContent");
        const noResults = document.getElementById("demoNoResults");

        // Hide other content
        defaultContent.classList.add("hidden");
        noResults.style.display = "none";

        // Update search results content
        searchResults.innerHTML = data
          .map(
            (item) => `
                <div class="demo-item">
                    <h4>${item.title}</h4>
                    <p>${item.description}</p>
                </div>
            `
          )
          .join("");

        // Show search results with transition
        setTimeout(() => {
          searchResults.classList.add("visible");
        }, 50);
      }

      function showDefaultContent() {
        const searchResults = document.getElementById("demoSearchResults");
        const defaultContent = document.getElementById("demoDefaultContent");
        const noResults = document.getElementById("demoNoResults");

        // Hide other content
        searchResults.classList.remove("visible");
        noResults.style.display = "none";

        // Show default content
        setTimeout(() => {
          defaultContent.classList.remove("hidden");
        }, TEST_CONFIG.transitionDuration);
      }

      function showNoResults() {
        const searchResults = document.getElementById("demoSearchResults");
        const defaultContent = document.getElementById("demoDefaultContent");
        const noResults = document.getElementById("demoNoResults");

        // Hide other content
        searchResults.classList.remove("visible");
        defaultContent.classList.add("hidden");

        // Show no results
        setTimeout(() => {
          noResults.style.display = "block";
        }, TEST_CONFIG.transitionDuration);
      }

      function clearDemoSearch() {
        const input = document.getElementById("demoSearchInput");
        const clearBtn = document.getElementById("demoClearBtn");

        input.value = "";
        clearBtn.classList.remove("clear-btn-visible");
        clearBtn.classList.add("clear-btn-hidden");

        showDefaultContent();
      }

      // Test functions
      async function testDebounceDelay() {
        logResult("🕐 Testing debounce delay (300ms)...", "info");
        updateTiming("Testing debounce delay...");

        const startTime = Date.now();
        const input = document.getElementById("demoSearchInput");

        // Simulate rapid typing
        input.value = "test";
        input.dispatchEvent(new Event("input"));

        input.value = "testing";
        input.dispatchEvent(new Event("input"));

        input.value = "testing search";
        input.dispatchEvent(new Event("input"));

        // Wait for debounce
        await new Promise((resolve) =>
          setTimeout(resolve, TEST_CONFIG.debounceDelay + 100)
        );

        const endTime = Date.now();
        const actualDelay = endTime - startTime;

        if (actualDelay >= TEST_CONFIG.debounceDelay - 50) {
          logResult(
            `✅ Debounce delay works correctly (${actualDelay}ms)`,
            "pass"
          );
          updateTiming(`Debounce test passed: ${actualDelay}ms`);
        } else {
          logResult(`❌ Debounce delay too short (${actualDelay}ms)`, "fail");
          updateTiming(`Debounce test failed: ${actualDelay}ms`);
        }
      }

      async function testClearButtonVisibility() {
        logResult("👁️ Testing clear button visibility...", "info");
        updateTiming("Testing clear button visibility...");

        const input = document.getElementById("demoSearchInput");
        const clearBtn = document.getElementById("demoClearBtn");

        // Test showing clear button
        input.value = "test search";
        input.dispatchEvent(new Event("input"));

        await new Promise((resolve) => setTimeout(resolve, 100));

        const isVisible = clearBtn.classList.contains("clear-btn-visible");

        if (isVisible) {
          logResult("✅ Clear button becomes visible when typing", "pass");
        } else {
          logResult("❌ Clear button visibility failed", "fail");
        }

        // Test hiding clear button
        input.value = "";
        input.dispatchEvent(new Event("input"));

        await new Promise((resolve) => setTimeout(resolve, 100));

        const isHidden = clearBtn.classList.contains("clear-btn-hidden");

        if (isHidden) {
          logResult("✅ Clear button hides when search is empty", "pass");
          updateTiming("Clear button visibility test passed");
        } else {
          logResult("❌ Clear button hiding failed", "fail");
          updateTiming("Clear button visibility test failed");
        }
      }

      async function testSmoothTransitions() {
        logResult("🎭 Testing smooth transitions...", "info");
        updateTiming("Testing smooth transitions...");

        const input = document.getElementById("demoSearchInput");
        const searchResults = document.getElementById("demoSearchResults");
        const defaultContent = document.getElementById("demoDefaultContent");

        // Test transition to search results
        input.value = "leadership";
        performDemoSearch();

        await new Promise((resolve) =>
          setTimeout(resolve, TEST_CONFIG.transitionDuration + 100)
        );

        const searchVisible = searchResults.classList.contains("visible");
        const defaultHidden = defaultContent.classList.contains("hidden");

        if (searchVisible && defaultHidden) {
          logResult("✅ Transition to search results works smoothly", "pass");
        } else {
          logResult("❌ Transition to search results failed", "fail");
        }

        // Test transition back to default
        input.value = "";
        performDemoSearch();

        await new Promise((resolve) =>
          setTimeout(resolve, TEST_CONFIG.transitionDuration + 100)
        );

        const searchHidden = !searchResults.classList.contains("visible");
        const defaultVisible = !defaultContent.classList.contains("hidden");

        if (searchHidden && defaultVisible) {
          logResult(
            "✅ Transition back to default content works smoothly",
            "pass"
          );
          updateTiming("Smooth transitions test passed");
        } else {
          logResult("❌ Transition back to default failed", "fail");
          updateTiming("Smooth transitions test failed");
        }
      }

      async function testVisualFeedback() {
        logResult("✨ Testing visual feedback during search...", "info");
        updateTiming("Testing visual feedback...");

        const input = document.getElementById("demoSearchInput");

        // Test focus states
        input.focus();
        await new Promise((resolve) => setTimeout(resolve, 100));

        const hasFocus = document.activeElement === input;
        if (hasFocus) {
          logResult("✅ Input focus state works correctly", "pass");
        } else {
          logResult("❌ Input focus state failed", "fail");
        }

        // Test hover effects (simulated)
        const buttons = document.querySelectorAll(".btn");
        let hoverEffectsWork = true;

        buttons.forEach((button) => {
          const computedStyle = window.getComputedStyle(button);
          if (
            !computedStyle.transition ||
            computedStyle.transition === "none"
          ) {
            hoverEffectsWork = false;
          }
        });

        if (hoverEffectsWork) {
          logResult("✅ Button hover effects are properly configured", "pass");
        } else {
          logResult("❌ Button hover effects missing", "fail");
        }

        // Test no results feedback
        input.value = "nonexistentterm123";
        performDemoSearch();

        await new Promise((resolve) =>
          setTimeout(resolve, TEST_CONFIG.transitionDuration + 100)
        );

        const noResults = document.getElementById("demoNoResults");
        const noResultsVisible = noResults.style.display !== "none";

        if (noResultsVisible) {
          logResult("✅ No results visual feedback works correctly", "pass");
          updateTiming("Visual feedback test passed");
        } else {
          logResult("❌ No results visual feedback failed", "fail");
          updateTiming("Visual feedback test failed");
        }

        // Clean up
        clearDemoSearch();
      }

      async function runAllTransitionTests() {
        logResult("🚀 Starting all transition tests...", "info");
        updateTiming("Running all tests...");

        const startTime = Date.now();

        try {
          await testDebounceDelay();
          await new Promise((resolve) => setTimeout(resolve, 500));

          await testClearButtonVisibility();
          await new Promise((resolve) => setTimeout(resolve, 500));

          await testSmoothTransitions();
          await new Promise((resolve) => setTimeout(resolve, 500));

          await testVisualFeedback();

          const endTime = Date.now();
          const totalTime = endTime - startTime;

          logResult(
            `✅ All transition tests completed in ${totalTime}ms`,
            "pass"
          );
          updateTiming(`All tests completed in ${totalTime}ms`);
        } catch (error) {
          logResult(`❌ Transition tests failed: ${error.message}`, "fail");
          updateTiming("Tests failed");
        }
      }

      // Initialize demo when page loads
      document.addEventListener("DOMContentLoaded", function () {
        setupDemoSearch();
        logResult("🎭 Search Transitions Test Suite loaded", "info");
        updateTiming("Test suite ready");
      });
    </script>
  </body>
</html>
