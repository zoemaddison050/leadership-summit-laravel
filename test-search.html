<!DOCTYPE html>
<html>
  <head>
    <title>Search Test</title>
    <style>
      .events-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
      }
      .event-card {
        border: 1px solid #ccc;
        padding: 20px;
        border-radius: 8px;
      }
      .search-bar {
        margin-bottom: 20px;
      }
      .search-bar input {
        padding: 10px;
        width: 300px;
        margin-right: 10px;
      }
      .search-bar button {
        padding: 10px 20px;
      }
    </style>
  </head>
  <body>
    <div class="search-bar">
      <input type="text" id="eventSearchInput" placeholder="Search events..." />
      <button onclick="searchEvents()">Search</button>
      <button onclick="clearSearch()" id="clearSearchBtn" style="display: none">
        Clear
      </button>
    </div>

    <div id="searchResults" style="display: none">
      <h3>Search Results:</h3>
      <div class="events-grid" id="searchEventsGrid"></div>
    </div>

    <div id="defaultEvents">
      <h3>All Events:</h3>
      <div class="events-grid" id="defaultEventsGrid">
        <div class="event-card">
          <h4>Opening Keynote: The Future of Leadership</h4>
          <p>Join us for an inspiring opening keynote...</p>
        </div>
        <div class="event-card">
          <h4>Leadership Workshop</h4>
          <p>Interactive workshop on leadership skills...</p>
        </div>
        <div class="event-card">
          <h4>Panel Discussion</h4>
          <p>Expert panel on modern leadership challenges...</p>
        </div>
      </div>
    </div>

    <script>
      const eventsData = [
        {
          title: "Opening Keynote: The Future of Leadership",
          description:
            "Join us for an inspiring opening keynote that sets the tone for the entire summit, exploring emerging trends in global leadership.",
          category: "keynote",
        },
        {
          title: "Leadership Workshop",
          description:
            "Interactive workshop on leadership skills and team management.",
          category: "workshop",
        },
        {
          title: "Panel Discussion",
          description:
            "Expert panel on modern leadership challenges and solutions.",
          category: "panel",
        },
      ];

      function searchEvents() {
        console.log("Search function called");

        const searchInput = document.getElementById("eventSearchInput");
        const searchResults = document.getElementById("searchResults");
        const defaultEvents = document.getElementById("defaultEvents");
        const searchGrid = document.getElementById("searchEventsGrid");
        const clearBtn = document.getElementById("clearSearchBtn");

        const searchTerm = searchInput.value.toLowerCase().trim();
        console.log("Search term:", searchTerm);

        if (searchTerm === "") {
          searchResults.style.display = "none";
          defaultEvents.style.display = "block";
          clearBtn.style.display = "none";
          return;
        }

        const filteredEvents = eventsData.filter(
          (event) =>
            event.title.toLowerCase().includes(searchTerm) ||
            event.description.toLowerCase().includes(searchTerm) ||
            event.category.toLowerCase().includes(searchTerm)
        );

        console.log("Filtered events:", filteredEvents.length);

        let eventsHTML = "";
        if (filteredEvents.length > 0) {
          filteredEvents.forEach((event) => {
            eventsHTML += `
                        <div class="event-card">
                            <h4>${event.title}</h4>
                            <p>${event.description}</p>
                        </div>
                    `;
          });
        } else {
          eventsHTML = "<p>No events found</p>";
        }

        searchGrid.innerHTML = eventsHTML;
        searchResults.style.display = "block";
        defaultEvents.style.display = "none";
        clearBtn.style.display = "inline-block";
      }

      function clearSearch() {
        document.getElementById("eventSearchInput").value = "";
        document.getElementById("searchResults").style.display = "none";
        document.getElementById("defaultEvents").style.display = "block";
        document.getElementById("clearSearchBtn").style.display = "none";
      }

      // Real-time search
      document
        .getElementById("eventSearchInput")
        .addEventListener("input", function () {
          setTimeout(searchEvents, 300);
        });
    </script>
  </body>
</html>
